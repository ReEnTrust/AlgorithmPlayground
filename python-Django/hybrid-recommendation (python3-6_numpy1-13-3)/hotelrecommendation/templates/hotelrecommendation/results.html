<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Hotel Recommendation</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    {% load static %}
    {% load template_extra_toolkits %}

    <link rel="stylesheet" href="{% static 'hotelrecommendation/assets/css/main.css'%}" />
    <noscript><link rel="stylesheet" href="{% static 'hotelrecommendation/assets/css/noscript.css'%}" /></noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header" class="alt">
        <span class="logo"><img src="{% static 'hotelrecommendation/images/paris.png'%}" alt="" style="width: 170px"/></span>
        <h1>Hotel Recommendation</h1>
        <p>Personalised Booking System</p>
    </header>

    <!-- Nav -->
    <nav id="nav">
        <ul>
            <li><a href="#intro" class="active">Profile</a></li>
            <li><a href="#first">Our Recommendations</a></li>
            <li><a href="#second">Browse Similar User</a></li>
        </ul>
    </nav>

    <!-- Main -->
    <div id="main">

        <!-- Introduction -->
        <section id="intro" class="main">
            <div class="spotlight">
                <div class="content">
                    <header class="major">
                        <h2>Your profile</h2>
                    </header>
                    <div>





                        <form method="post">
                            {% csrf_token %}
                            <div class="row gtr-uniform">

                                <div class="col-4 col-12-small">
                                    <label for="id_gender">Gender:</label>
                                    <select name="gender" id="id_gender">
                                        {% if gender == "M" %}
                                        <option value="M" selected="selected">Male</option>
                                        {% else %}
                                        <option value="M">Male</option>
                                        {% endif %}

                                        {% if gender == "F" %}
                                        <option value="F" selected="selected">Female</option>
                                        {% else %}
                                        <option value="F">Female</option>
                                        {% endif %}


                                    </select>
                                </div>

                                <div class="col-4 col-12-small">
                                    <label for="id_age">Age:</label>
                                    <input type="number" name="age" required="" id="id_age" min="18" value={{age}}>
                                </div>

                                <div class="col-4 col-12-small">
                                    <label for="id_target_price">Ideal price per night & per person (£):</label>
                                    <input type="number" name="target_price" required="" id="id_target_price" min="60" max="400" value={{target_price}}>
                                </div>

                                <div class="col-4 col-12-small">
                                    {% if physically_disabled == "True"%}
                                    <input type="checkbox" name="physically_disabled" id="id_physically_disabled" checked>
                                    {% else %}
                                    <input type="checkbox" name="physically_disabled" id="id_physically_disabled">
                                    {% endif %}
                                    <label for="id_physically_disabled">Wheelchair User</label>
                                </div>



                                <div class="col-4 col-12-small">
                                    {% if is_married == "True"%}
                                    <input type="checkbox" name="is_married" id="id_is_married" checked>
                                    {% else %}
                                    <input type="checkbox" name="is_married" id="id_is_married">
                                    {% endif %}
                                    <label for="id_is_married">Is married</label>
                                </div>

                                <div class="col-4 col-12-small">
                                    {% if have_kids == "True" %}
                                    <input type="checkbox" name="have_kids" id="id_have_kids" checked>
                                    {% else %}
                                    <input type="checkbox" name="have_kids" id="id_have_kids">
                                    {% endif %}
                                    <label for="id_have_kids">Have kids</label>
                                </div>

                                <h2 style="width: 100%;">Algorithm selection:</h2>

                                <div class="col-4 col-12-small">
                                    <input type="radio" name="algo" value="1" id="id_algo_0" {% if algo == 1 %} checked {%endif %}>
                                    <label for="id_algo_0"> Algorithm 1 </label>
                                </div>

                                <div class="col-4 col-12-small">
                                    <input type="radio" name="algo" value="2" id="id_algo_1" {% if algo == 2 %} checked {%endif %}>
                                    <label for="id_algo_1">Algorithm 2</label>
                                </div>

                                <div class="col-4 col-12-small">
                                    <input type="radio" name="algo" value="3" id="id_algo_2" {% if algo == 3 %} checked {%endif %}>
                                    <label for="id_algo_2">Algorithm 3</label>
                                </div>

                                <div class="col-12" id="update-button-div">
                                    <input type="submit" value="Update" class="primary" style="margin-top: 2em;">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
        </section>

        <!-- First Section -->
        <section id="first" class="main special">
            <header class="major">
                <h2>Recommendations</h2>
            </header>
            <div>
                {% for Z, P, averagePrice, averageReview ,percentageSingle ,percentageTwin ,percentageFamily ,percentageDouble ,percentageSwim ,percentageBreak ,percentageAccessible in L reversed %}

                <div style="width: 100%; overflow: hidden; margin-bottom: 2em;">
                    <div style="width: 30%;float: left; padding-top: 3em;">
                        <ul style="text-align: left;">
                            <li>Age: {{P|key:'age'}}</li>
                            <li>Ideal price: {{P|key:'price'}}</li>
                            <li>Wheelchair user: {{P|key:'wheelchair'}}</li>
                            <li>Marital status: {{P|key:'married'}}</li>
                            <li>Have kids: {{P|key:'kids'}}</li>
                            <li>Gender: {{P|key:'gender'}}</li>
                            <li>Algorithm used: {{P|key:'algo'}}</li>
                        </ul>
                    </div>

                    <div style="margin-left: 35%">
                        <ul style="list-style: none;">
                            <li>Average price per night: £{{averagePrice|floatformat:"1"}}</li>
                            <li>Average review: {{averageReview|floatformat:"1"}}/5</li>
                        </ul>

                        <div class="row gtr-uniform">
                            {% if percentageSingle != 0 %}
                            <div style="background: cadetblue; text-align: center; width: {{percentageSingle}}%;" title="{{percentageSingle}}%">
                                Single
                            </div>
                            {% endif %}

                            {% if percentageDouble != 0 %}
                            <div style="background: #7ec3ee; text-align: center; width: {{percentageDouble}}%" title="{{percentageDouble}}%">
                                Double
                            </div>
                            {% endif %}

                            {% if percentageTwin != 0 %}
                            <div style="background:#a89cc8; text-align: center; width: {{percentageTwin}}%" title="{{percentageTwin}}%">
                                Twin
                            </div>
                            {% endif %}

                            {% if percentageFamily != 0 %}
                            <div style="background: #e37682; text-align: center; width: {{percentageFamily}}%" title="{{percentageFamily}}%">
                                Family
                            </div>
                            {% endif %}

                            {% if percentageAccessible != 0 %}
                            <div style="background: aquamarine; text-align: center; width: {{percentageAccessible}}%" title="{{percentageAccessible}}%">
                                {% if percentageAccessible >= 40 %}
                                Wheelchair Accessible
                                {% else %}
                                WA
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if 100|subtract:percentageAccessible != 0 %}
                            <div style="background:hotpink; width: {{100|subtract:percentageAccessible}}%" title="{{100|subtract:percentageAccessible}}%">
                                {% if percentageNotAccessible >= 40 %}
                                Not Wheelchair Accessible
                                {% else %}
                                NWA
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if percentageSwim != 0 %}
                            <div style="background: greenyellow; text-align: center; width: {{percentageSwim}}%" title="{{percentageSwim}}%">
                                {% if percentageSwim >= 30 %}
                                Swimming Pool
                                {% else %}
                                SP
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if 100|subtract:percentageSwim != 0 %}
                            <div style="background: aliceblue; text-align: center; width: {{100|subtract:percentageSwim}}%" title="{{100|subtract:percentageSwim}}%">
                                {% if percentageNotSwim >= 30 %}
                                No Swimming Pool
                                {% else %}
                                NSP
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if percentageBreak != 0 %}
                            <div style="background:violet; text-align: center; width: {{percentageBreak}}%" title="{{percentageBreak}}%">
                                {% if percentageBreak >= 20 %}
                                Breakfast
                                {% else %}
                                B
                                {% endif %}
                            </div>
                            {% endif %}

                            {% if 100|subtract:percentageBreak != 0 %}
                            <div style="background: aquamarine; text-align: center; width: {{100|subtract:percentageBreak}}%" title="{{100|subtract:percentageBreak}}%">
                                {% if percentageNotBreak >= 30 %}
                                No Breakfast
                                {% else %}
                                NB
                                {% endif %}
                            </div>
                            {% endif %}



                        </div>
                    </div>
                </div>

                <div style="margin: 2em;">
                <a class="collapsible">See the hotels</a>
                </div>

                <table class="content-hotel" style="width:100%; border: solid;margin-top: 2em;">

                    <tr>
                        <th>#</th>
                        <th>Hotel Name</th>
                        <!--<th>Address</th>-->
                        <!--<th>City</th>-->
                        <th>Night Price</th>
                        <th>Room Type</th>
                        <th>Wheelchair Accessible</th>
                        <th>Swimming Pool</th>
                        <th>Breakfast Available</th>
                        <th>Reviews</th>
                        <th>Michelin Restaurant</th>
                    </tr>

                    {% for l in Z %}
                    <tr>
                        <th>{{ forloop.counter}}</th>
                        <th>{{ l.hotel_name }}</th>
                        <!--<th>{{ l.hotel_address }}</th>-->
                        <!--<th>{{ l.hotel_location }}</th>-->
                        <th>{{ l.hotel_night_price|floatformat:"1"  }}</th>

                        {% if l.hotel_room_type == "D" %}
                        <th> Double </th>
                        {% elif l.hotel_room_type == "S" %}
                        <th> Single </th>
                        {% elif l.hotel_room_type == "T" %}
                        <th> Twin </th>
                        {% else %}
                        <th> Family </th>
                        {% endif %}

                        {% if l.hotel_disability_access %}
                        <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                        {% else %}
                        <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                        {% endif %}

                        {% if l.hotel_swimming_pool %}
                        <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                        {% else %}
                        <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                        {% endif %}

                        {% if l.hotel_breakfast_available %}
                        <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                        {% else %}
                        <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                        {% endif %}

                        <th>{% with ''|center:l.hotel_user_reviews as range %}
                            {% for _ in range %}
                            <i class="fa fa-star" aria-hidden="true" style="color: #CCCC00;"></i>
                            {% endfor %}
                            {% endwith %}
                        </th>

                        {% if l.hotel_michelin_restaurant %}
                        <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                        {% else %}
                        <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                        {% endif %}
                    </tr>
                    {% endfor %}

                </table>
                <div style="margin: 2em;">
                <hr>
                </div>
                {% endfor %}



            </div>
            <!--<footer class="major">-->
            <!--<ul class="actions special">-->
            <!--<li><a href="#" class="button">Learn More About This</a></li>-->
            <!--</ul>-->
            <!--</footer>-->
        </section>

        <!-- Second Section -->
        <section id="second" class="main special">
            <header class="major">
                <h2>Similar Users</h2>
                <p>Our database regroups more than 1000+ users.</p>
            </header>
            <ul class="statistics">
                <li class="style1">
                    <span class="icon fa-bed"></span>
                    <strong>1500+</strong> Hotels
                </li>
                <li class="style2">
                    <span class="icon fa-folder-open-o"></span>
                    <strong>1000+</strong> User Data
                </li>
                <li class="style3">
                    <span class="icon fa-signal"></span>
                    <strong>10,000+</strong> Ratings
                </li>
                <li class="style4">
                    <span class="icon fa-laptop"></span>
                    <strong>FAST</strong> Computation
                </li>
                <li class="style5">
                    <span class="icon fa-diamond"></span>
                    <strong>FREE</strong> Service
                </li>
            </ul>


            <p class="content">The users below have been carefully picked to match the data in your profile. You can have view and access the ratings that these users have previously made on a selection of hotels. The first person on the list is the user that is the most similar to you.</p>

            {% if S|length > 0 %}
            <table style="width:100%; border: solid;">
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Target Price</th>
                    <th>Is Married</th>
                    <th>Wheelchair User</th>
                    <th>Have Kids</th>
                </tr>

                {% for l in S %}
                <tr>
                    <th><a href="{% url 'hotelrecommendation:result_user_rating' log age target_price physically_disabled is_married have_kids gender algo l.id%}">{{ l.user_firstname }} {{ l.user_lastname }}</a></th>
                    <th>{{ l.user_age }}</th>
                    <th>{{ l.gender  }}</th>
                    <th>{{ l.user_target_price|floatformat:"1"  }}</th>

                    {% if l.user_is_married %}
                    <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                    {% else %}
                    <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                    {% endif %}


                    {% if l.user_disable %}
                    <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                    {% else %}
                    <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                    {% endif %}

                    {% if l.user_have_kids %}
                    <th><i class="fa fa-check-circle-o" aria-hidden="true" style="color: green;"></i></th>
                    {% else %}
                    <th><i class="fa fa-times-circle" aria-hidden="true" style="color: red;"></i></th>
                    {% endif %}
                </tr>
                {% endfor %}
            </table>


            {% endif %}

            <!--<footer class="major">-->
            <!--<ul class="actions special">-->
            <!--<li><a href="generic.html" class="button">Learn More</a></li>-->
            <!--</ul>-->
            <!--</footer>-->
        </section>

    </div>

    <!-- Footer -->
    <footer id="footer">
        <section>
            <h2>What is this tool?</h2>
            <p>Hotel Recommendation is a tool that recommends hotels by using your personal details. Your profile will be compared with thousands of other users. Our database of ratings and hotels will make sure that you find the perfect match.</p>

        </section>
        <section>
            <h2>A problem? Contact Us</h2>
            <dl class="alt">
                <dt>Address</dt>
                <dd>10 Crichton St, Edinburgh EH8 9AB, UK
                </dd>
                <dt>Phone</dt>
                <dd>0131 650 1000
                </dd>
                <dt>Email</dt>
                <dd><a href="mailto: ybruno@ed.ac.uk">ybruno@ed.ac.uk</a></dd>
            </dl>
            <!--<ul class="icons">-->
            <!--<li><a href="#" class="icon fa-twitter alt"><span class="label">Twitter</span></a></li>-->
            <!--<li><a href="#" class="icon fa-facebook alt"><span class="label">Facebook</span></a></li>-->
            <!--<li><a href="#" class="icon fa-instagram alt"><span class="label">Instagram</span></a></li>-->
            <!--<li><a href="#" class="icon fa-github alt"><span class="label">GitHub</span></a></li>-->
            <!--<li><a href="#" class="icon fa-dribbble alt"><span class="label">Dribbble</span></a></li>-->
            <!--</ul>-->
        </section>
        <p class="copyright">&copy; Hotel Recommendation.</p>
    </footer>

</div>



<!-- Scripts -->
<script src="{% static 'hotelrecommendation/assets/js/jquery.min.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/jquery.scrollex.min.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/jquery.scrolly.min.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/browser.min.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/breakpoints.min.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/util.js'%}"></script>
<script src="{% static 'hotelrecommendation/assets/js/main.js'%}"></script>

<!-- Script for hidding and showing the table -->
<script type="text/javascript">
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.parentNode.nextElementSibling;

            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
</script>

</body>



</html>









